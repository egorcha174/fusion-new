# –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ –ø—Ä–æ–µ–∫—Ç—É Home Assistant UI

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ (P0 - –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ)

### 1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –ù–µ–Ω—É–∂–Ω—ã–µ —Ä–µ—Ä–µ–Ω–¥–µ—Ä—ã –≤ App.tsx**
**–õ–æ–∫–∞—Ü–∏—è**: `App.tsx`, —Å—Ç—Ä–æ–∫–∏ 150-250
**–ü—Ä–æ–±–ª–µ–º–∞**: –ê–Ω–æ–Ω–∏–º–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –ø—Ä–æ–ø—Å–∞—Ö –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É—é—Ç –º–µ–º–æ–∏–∑–∞—Ü–∏—é
```typescript
// ‚ùå –ü–ª–æ—Ö–æ - —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
onTabChange={(tabId) => {
  setActiveTabId(tabId);
  setCurrentPage('dashboard');
}}
```
**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å useCallback
```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ
const handleTabChange = useCallback((tabId: string) => {
  setActiveTabId(tabId);
  setCurrentPage('dashboard');
}, [setActiveTabId, setCurrentPage]);
```
**–í–ª–∏—è–Ω–∏–µ**: –ö–∞–∂–¥—ã–π —Ä–µ–Ω–¥–µ—Ä App.tsx –≤—ã–∑—ã–≤–∞–µ—Ç —Ä–µ—Ä–µ–Ω–¥–µ—Ä –≤—Å–µ—Ö –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: P0

### 2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Zustand**
**–õ–æ–∫–∞—Ü–∏—è**: `App.tsx`, —Å—Ç—Ä–æ–∫–∏ 420-430
**–ü—Ä–æ–±–ª–µ–º–∞**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `useAppStore.getState()` –≤–º–µ—Å—Ç–æ —Ö—É–∫–æ–≤
```typescript
// ‚ùå –ü–ª–æ—Ö–æ - –æ–±—Ö–æ–¥ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
{useAppStore.getState().editingDevice && (
  <DeviceSettingsModal ... />
)}
```
**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö—É–∫ —Å —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–º
```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ
const editingDevice = useAppStore(state => state.editingDevice);
{editingDevice && <DeviceSettingsModal ... />}
```
**–í–ª–∏—è–Ω–∏–µ**: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: P0

### 3. **–£—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏ –≤ —ç—Ñ—Ñ–µ–∫—Ç–∞—Ö**
**–õ–æ–∫–∞—Ü–∏—è**: `App.tsx`, —Ñ—É–Ω–∫—Ü–∏—è `useIsLg`
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –æ—á–∏—Å—Ç–∫–∏ —Å–ª—É—à–∞—Ç–µ–ª–µ–π —Å–æ–±—ã—Ç–∏–π
```typescript
// ‚ùå –ü–ª–æ—Ö–æ
useEffect(() => {
  const handleResize = () => setIsLg(window.innerWidth >= 1024);
  window.addEventListener('resize', handleResize);
  // –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç cleanup!
}, []);
```
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å cleanup —Ñ—É–Ω–∫—Ü–∏—é
```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ
useEffect(() => {
  const handleResize = () => setIsLg(window.innerWidth >= 1024);
  window.addEventListener('resize', handleResize);
  return () => window.removeEventListener('resize', handleResize);
}, []);
```
**–í–ª–∏—è–Ω–∏–µ**: –£—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –¥–æ–ª–≥–æ–π —Ä–∞–±–æ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: P0

### 4. **–ü–µ—Ä–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–π**
**–õ–æ–∫–∞—Ü–∏—è**: `App.tsx`, useEffect —Å—Ç—Ä–æ–∫–∏ 180-190
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –±–µ–∑ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
```typescript
// ‚ùå –ü–ª–æ—Ö–æ
const newTab: Tab = { 
  id: nanoid(), 
  name: '–ì–ª–∞–≤–Ω–∞—è', 
  layout: [], // –ü–£–°–¢–û!
  gridSettings: { cols: 8, rows: 5 } 
};
```
**–†–µ—à–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è—Ç—å –≤—Å–µ–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ
const allDeviceIds = Array.from(allKnownDevices.keys());
const newTab: Tab = { 
  id: nanoid(), 
  name: '–ì–ª–∞–≤–Ω–∞—è', 
  layout: allDeviceIds.map(id => ({ deviceId: id, col: 0, row: 0, width: 1, height: 1 })),
  gridSettings: { cols: 8, rows: 5 } 
};
```
**–í–ª–∏—è–Ω–∏–µ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø—É—Å—Ç–æ–π —ç–∫—Ä–∞–Ω –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: P0

### 5. **Error Boundaries —Å–æ–∑–¥–∞–Ω—ã, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è**
**–õ–æ–∫–∞—Ü–∏—è**: `components/ErrorBoundary.tsx` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω
**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–µ –æ–±–µ—Ä–Ω—É—Ç—ã –≤ ErrorBoundary
**–†–µ—à–µ–Ω–∏–µ**: –û–±–µ—Ä–Ω—É—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ
<ErrorBoundary fallback={<div>–û—à–∏–±–∫–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</div>}>
  <App />
</ErrorBoundary>

<ErrorBoundary fallback={<div>–û—à–∏–±–∫–∞ –≤ –≤–∫–ª–∞–¥–∫–µ</div>}>
  <TabContent ... />
</ErrorBoundary>
```
**–í–ª–∏—è–Ω–∏–µ**: –ü—Ä–∏ –æ—à–∏–±–∫–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –ø–∞–¥–∞–µ—Ç –≤—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: P0

---

## ‚ö†Ô∏è –°–ï–†–¨–ï–ó–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ (P1 - –í–∞–∂–Ω–æ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)

### 6. **–¢—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤ —Ä–µ–Ω–¥–µ—Ä–µ**
**–õ–æ–∫–∞—Ü–∏—è**: `App.tsx`, `filteredRoomsForEntitiesPage`
**–ü—Ä–æ–±–ª–µ–º–∞**: –°–ª–æ–∂–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
```typescript
const filteredRoomsForEntitiesPage = useMemo(() => {
  if (!searchTerm) return allRoomsForDevicePage;
  // ... —Å–ª–æ–∂–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è O(n*m)
}, [searchTerm, allRoomsForDevicePage]); // allRoomsForDevicePage –º–µ–Ω—è–µ—Ç—Å—è —á–∞—Å—Ç–æ
```
**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useTransition` –¥–ª—è –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
```typescript
const [isPending, startTransition] = useTransition();
const [filteredRooms, setFilteredRooms] = useState([]);

useEffect(() => {
  startTransition(() => {
    setFilteredRooms(performHeavyFiltering());
  });
}, [searchTerm]);
```
**–í–ª–∏—è–Ω–∏–µ**: –ó–∞–º–µ–¥–ª–µ–Ω–∏–µ UI –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: P1

### 7. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤**
**–õ–æ–∫–∞—Ü–∏—è**: `TabContent.tsx`, `AllDevicesPage.tsx`
**–ü—Ä–æ–±–ª–µ–º–∞**: –í—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è —Å—Ä–∞–∑—É
**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `react-window` –∏–ª–∏ `react-virtualized`
```typescript
import { FixedSizeGrid as Grid } from 'react-window';

<Grid
  columnCount={columns}
  rowCount={Math.ceil(devices.length / columns)}
  columnWidth={200}
  rowHeight={200}
  height={600}
  width={1200}
>
  {({ columnIndex, rowIndex, style }) => {
    const device = devices[rowIndex * columns + columnIndex];
    return <DeviceCard device={device} style={style} />;
  }}
</Grid>
```
**–í–ª–∏—è–Ω–∏–µ**: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ >100 —É—Å—Ç—Ä–æ–π—Å—Ç–≤
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: P1

### 8. **–ê–Ω–æ–Ω–∏–º–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –ø—Ä–æ–ø—Å–∞—Ö (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ)**
**–õ–æ–∫–∞—Ü–∏—è**: `TabContent.tsx`, `DeviceCard.tsx`
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
```typescript
// ‚ùå –ü–ª–æ—Ö–æ
onDeviceContextMenu={(event) => onDeviceContextMenu(event, device.id, tab.id)}
```
**–†–µ—à–µ–Ω–∏–µ**: useCallback –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ
const handleContextMenu = useCallback((event: React.MouseEvent) => {
  onDeviceContextMenu(event, device.id, tab.id);
}, [device.id, tab.id, onDeviceContextMenu]);
```
**–í–ª–∏—è–Ω–∏–µ**: –õ–∏—à–Ω–∏–µ —Ä–µ—Ä–µ–Ω–¥–µ—Ä—ã –∫–∞—Ä—Ç–æ—á–µ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: P1

### 9. **–ë–æ–ª—å—à–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (>200 —Å—Ç—Ä–æ–∫)**
**–õ–æ–∫–∞—Ü–∏—è**: `App.tsx` (498 —Å—Ç—Ä–æ–∫)
**–ü—Ä–æ–±–ª–µ–º–∞**: –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
**–†–µ—à–µ–Ω–∏–µ**: –†–∞–∑–±–∏—Ç—å –Ω–∞ smaller –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `AppLayout.tsx` - layout
- `AppRoutes.tsx` - —Ä–æ—É—Ç–∏–Ω–≥  
- `AppEffects.tsx` - —ç—Ñ—Ñ–µ–∫—Ç—ã
- `AppModals.tsx` - –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞

**–í–ª–∏—è–Ω–∏–µ**: –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: P1

### 10. **–ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –≤ –º–∞–ø–ø–∏–Ω–≥–µ**
**–õ–æ–∫–∞—Ü–∏—è**: `utils/ha-data-mapper.ts`
**–ü—Ä–æ–±–ª–µ–º–∞**: O(n*m) —Å–ª–æ–∂–Ω–æ—Å—Ç—å
```typescript
// ‚ùå –ü–ª–æ—Ö–æ - –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã
entities.forEach(entity => {
  haDevices.find(d => d.id === entity.attributes.device_id); // O(n*m)
});
```
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞—Ç—å Map
```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ - O(n+m)
const deviceById = new Map(haDevices.map(d => [d.id, d]));
entities.forEach(entity => {
  const haDevice = deviceById.get(entity.attributes.device_id);
});
```
**–í–ª–∏—è–Ω–∏–µ**: –ó–∞–º–µ–¥–ª–µ–Ω–∏–µ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (>500)
**–ü—Ä–∏—Ç–æ—Ä–∏—Ç–µ—Ç**: P1

---

## üìä –°–†–ï–î–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ (P2 - –£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞)

### 11. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤**
**–õ–æ–∫–∞—Ü–∏—è**: `store/appStore.ts` –∏ `store/haStore.ts`
**–ü—Ä–æ–±–ª–µ–º–∞**: –û–±–∞ —Ñ–∞–π–ª–∞ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –ø–æ—Ö–æ–∂–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
**–†–µ—à–µ–Ω–∏–µ**: –í—ã–Ω–µ—Å—Ç–∏ –æ–±—â–∏–µ —Ç–∏–ø—ã –≤ `types.ts`
```typescript
// ‚úÖ –í types.ts
export interface StoreState {
  // –û–±—â–∏–µ –ø–æ–ª—è
}

// ‚úÖ –í store —Ñ–∞–π–ª–∞—Ö
interface AppState extends StoreState { ... }
interface HAState extends StoreState { ... }
```
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: P2

### 12. **–ù–µ—è–≤–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è (any)**
**–õ–æ–∫–∞—Ü–∏—è**: `utils/ha-data-mapper.ts`, —Å—Ç—Ä–æ–∫–∏ 220-240
**–ü—Ä–æ–±–ª–µ–º–∞**: `forecastAttr: any`
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å —è–≤–Ω—ã–µ —Ç–∏–ø—ã
```typescript
interface WeatherForecastAttr {
  daily?: WeatherForecast[];
  forecast?: WeatherForecast[];
  [key: string]: any;
}
```
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: P2

### 13. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ .env.example**
**–õ–æ–∫–∞—Ü–∏—è**: –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –ø—Ä–∏–º–µ—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
**–†–µ—à–µ–Ω–∏–µ**: –°–æ–∑–¥–∞—Ç—å `.env.local.example`
```bash
VITE_HA_URL=http://homeassistant.local:8123
VITE_HA_TOKEN=your_long_lived_access_token
VITE_GEMINI_API_KEY=your_gemini_api_key
```
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: P2

### 14. **–°–ª–æ–∂–Ω—ã–µ —É—Å–ª–æ–≤–∏—è**
**–õ–æ–∫–∞—Ü–∏—è**: `utils/ha-data-mapper.ts`, —Ñ—É–Ω–∫—Ü–∏—è `getDeviceType`
**–ü—Ä–æ–±–ª–µ–º–∞**: –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö if
**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∏–ª–∏ lookup table
```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ
const deviceTypeStrategies: Record<string, (entity: HassEntity) => DeviceType> = {
  'light': (entity) => entity.attributes.brightness ? DeviceType.DimmableLight : DeviceType.Light,
  'switch': (entity) => entity.attributes.device_class === 'outlet' ? DeviceType.Outlet : DeviceType.Switch,
  // ...
};
```
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: P2

---

## üìà –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –°—Ä–µ–¥–Ω–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å |
|-----------|------------|----------------------------------------|
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Ä–µ–Ω–¥–µ—Ä—ã) | 4 | 30-50% –∑–∞–º–µ–¥–ª–µ–Ω–∏—è |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–∞–ª–≥–æ—Ä–∏—Ç–º—ã) | 2 | 20-40% –∑–∞–º–µ–¥–ª–µ–Ω–∏—è |
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | 3 | –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏ +50% |
| TypeScript | 2 | –†–∏—Å–∫ runtime –æ—à–∏–±–æ–∫ |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ | 2 | –†–∏—Å–∫ –ø–∞–¥–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ | 1 | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ +20% –≤—Ä–µ–º–µ–Ω–∏ |
| **–í—Å–µ–≥–æ** | **14** | **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö: 5** |

---

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–ù–´–ô –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### **–≠—Ç–∞–ø 1: –ö—Ä–∏—Ç–∏—á–Ω—ã–µ (1-2 –¥–Ω—è)**
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å useAppStore.getState() –Ω–∞ —Ö—É–∫–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ—á–∏—Å—Ç–∫—É —Å–ª—É—à–∞—Ç–µ–ª–µ–π —Å–æ–±—ã—Ç–∏–π
- [ ] –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–≤—É—é –≤–∫–ª–∞–¥–∫—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
- [ ] –û–±–µ—Ä–Ω—É—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ ErrorBoundary
- [ ] –î–æ–±–∞–≤–∏—Ç—å .env.local.example

### **–≠—Ç–∞–ø 2: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (3-5 –¥–Ω–µ–π)**
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º—ã –º–∞–ø–ø–∏–Ω–≥–∞ (O(n*m) ‚Üí O(n+m))
- [ ] –î–æ–±–∞–≤–∏—Ç—å React.memo –∫–æ –≤—Å–µ–º –∫–∞—Ä—Ç–æ—á–∫–∞–º
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å –∞–Ω–æ–Ω–∏–º–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ useCallback
- [ ] –†–∞–∑–±–∏—Ç—å App.tsx –Ω–∞ smaller –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å useTransition –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### **–≠—Ç–∞–ø 3: –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ (2-3 –¥–Ω—è)**
- [ ] –£—Å—Ç—Ä–∞–Ω–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å —è–≤–Ω—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é –≤–º–µ—Å—Ç–æ any
- [ ] –£–ø—Ä–æ—Å—Ç–∏—Ç—å —Å–ª–æ–∂–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
- [ ] –î–æ–±–∞–≤–∏—Ç—å JSDoc –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º

### **–≠—Ç–∞–ø 4: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (1-2 –Ω–µ–¥–µ–ª–∏)**
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—é —Å–ø–∏—Å–∫–æ–≤
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ä–µ–Ω–¥–µ—Ä—ã —Å React.memo
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
- [ ] –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å bottleneck'—ã

---

## üîß –ë–´–°–¢–†–´–ï –§–ò–ö–°–´ (–º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∑–∞ —á–∞—Å)

1. **useIsLg —Ö—É–∫** (App.tsx):
```typescript
const useIsLg = () => {
  const [isLg, setIsLg] = useState(window.innerWidth >= 1024);
  useEffect(() => {
    const handleResize = () => setIsLg(window.innerWidth >= 1024);
    window.addEventListener('resize', handleResize);
    return () => window.removeEventListener('resize', handleResize); // –î–æ–±–∞–≤–∏—Ç—å cleanup
  }, []);
  return isLg;
}
```

2. **–ü–µ—Ä–≤–∞—è –≤–∫–ª–∞–¥–∫–∞** (App.tsx):
```typescript
useEffect(() => {
  if (connectionStatus === 'connected' && !isLoading && tabs.length === 0) {
    const allDeviceIds = Array.from(allKnownDevices.keys());
    const newTab: Tab = { 
      id: nanoid(), 
      name: '–ì–ª–∞–≤–Ω–∞—è', 
      layout: allDeviceIds.map(id => ({ deviceId: id, col: 0, row: 0, width: 1, height: 1 })),
      gridSettings: { cols: 8, rows: 5 } 
    };
    setTabs([newTab]);
    setActiveTabId(newTab.id);
  }
}, [connectionStatus, isLoading, tabs.length]);
```

3. **Zustand —Ö—É–∫–∏** (App.tsx):
```typescript
const editingDevice = useAppStore(state => state.editingDevice);
const { setEditingDevice } = useAppStore();

{editingDevice && (
  <DeviceSettingsModal device={editingDevice} onClose={() => setEditingDevice(null)} />
)}
```

---

## üìä –ò–¢–û–ì–û–í–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

**–ö—Ä–∏—Ç–∏—á–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å**: 5 –ø—Ä–æ–±–ª–µ–º (P0)
**–í–∞–∂–Ω–æ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**: 4 –ø—Ä–æ–±–ª–µ–º—ã (P1)
**–î–ª—è –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞**: 5 –ø—Ä–æ–±–ª–µ–º (P2)

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π**:
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: +50-70%
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏: -30%
- –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å: +80%
- –í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: -25%

**–°—Ä–æ–∫–∏**: 7-10 –¥–Ω–µ–π –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º